# ===========================================
# Backend Server 환경변수 설정
# Spring Boot, 데이터베이스, 외부 API 설정 전용
# ===========================================

# ------------------------------------------
# 데이터베이스 설정 (MySQL)
# ------------------------------------------
DB_HOST=mysql-db
DB_PORT=3306
DB_NAME=capstone_db
DB_USERNAME=root
DB_PASSWORD=your_secure_db_password_here

# 데이터베이스 연결 풀 설정
DB_POOL_SIZE=10
DB_MAX_IDLE=5
DB_MIN_IDLE=2

# ------------------------------------------
# JWT 보안 설정
# ------------------------------------------
JWT_SECRET=your_super_secret_jwt_key_min_256_bits_long_for_security
JWT_EXPIRATION=86400000
JWT_REFRESH_EXPIRATION=604800000

# ------------------------------------------
# AWS 서비스 설정
# ------------------------------------------
# S3 버킷 설정
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
S3_BUCKET_NAME=your-capstone-bucket

# ------------------------------------------
# 파일 업로드 설정
# ------------------------------------------
# 파일 저장 경로
UPLOAD_PATH=/app/uploaded-images
MAX_FILE_SIZE=10MB
ALLOWED_FILE_TYPES=jpg,jpeg,png,gif,pdf,doc,docx

# 이미지 처리 설정
IMAGE_MAX_WIDTH=1920
IMAGE_MAX_HEIGHT=1080
IMAGE_QUALITY=85

# ------------------------------------------
# 외부 API 연동 설정
# ------------------------------------------
# 크롤링 서버 연동 (Frontend Server의 크롤링 서버)
CRAWLER_API_URL=http://${FRONTEND_SERVER_IP}:8000
CRAWLER_API_TIMEOUT=300000

# ------------------------------------------
# 크롤링 대상 사이트 설정
# ------------------------------------------
CRAWLER_TARGET_SITES=http://site1.com,http://site2.com,http://site3.com
CRAWLER_SCHEDULE_CRON=0 2 * * *
CRAWLER_MAX_PAGES=100
CRAWLER_DELAY_MS=1000

# ------------------------------------------
# Spring Boot 설정
# ------------------------------------------
# 서버 설정
SERVER_PORT=6030
SERVER_SERVLET_CONTEXT_PATH=/api

# Spring Profile
SPRING_PROFILES_ACTIVE=production

# JPA/Hibernate 설정
JPA_HIBERNATE_DDL_AUTO=validate
JPA_SHOW_SQL=false
JPA_FORMAT_SQL=false

# 로깅 설정
SQL_LOG_LEVEL=WARN
SQL_PARAM_LOG_LEVEL=WARN
SECURITY_LOG_LEVEL=WARN

# 파일 업로드 추가 설정
MAX_REQUEST_SIZE=50MB

# API 문서 설정 (프로덕션)
API_DOCS_ENABLED=false
SWAGGER_UI_ENABLED=false

# Actuator 설정
MANAGEMENT_ENDPOINTS=health,info,metrics
HEALTH_SHOW_DETAILS=when-authorized

# ------------------------------------------
# 메일 설정 (알림용)
# ------------------------------------------
MAIL_HOST=smtp.gmail.com
MAIL_PORT=587
MAIL_USERNAME=your-email@gmail.com
MAIL_PASSWORD=your-app-password
MAIL_FROM=noreply@your-project.com

# ------------------------------------------
# 캐시 설정 (Redis 등)
# ------------------------------------------
CACHE_ENABLED=false
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# ------------------------------------------
# 모니터링 설정
# ------------------------------------------
# 업데이트된 Actuator 설정
MANAGEMENT_ENDPOINTS=health,info,metrics
HEALTH_SHOW_DETAILS=when-authorized

# ------------------------------------------
# 추가 Spring Boot 설정
# ------------------------------------------
# 데이터베이스 URL 컴포넌트 (자동 조합됨)
SPRING_DATASOURCE_URL=jdbc:mysql://${DB_HOST}:${DB_PORT}/${DB_NAME}?serverTimezone=UTC&characterEncoding=UTF-8&useSSL=false&allowPublicKeyRetrieval=true

# ------------------------------------------
# 누락된 필수 환경변수들
# ------------------------------------------
# 메일 발신자 정보
MAIL_FROM=noreply@your-project.com

# 파일 업로드 바이트 단위 설정
MAX_FILE_SIZE_BYTES=10485760

# 개발/프로덕션 구분용 추가 환경변수
HEALTH_SHOW_DETAILS=when-authorized

# ------------------------------------------
# FastAPI 챗봇 서비스 설정
# ------------------------------------------
# 챗봇 서버 연결 정보
CHATBOT_HOST=chatbot-api
CHATBOT_PORT=8001
CHATBOT_API_URL=http://${CHATBOT_HOST}:${CHATBOT_PORT}

# OpenAI API 설정
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_MODEL=gpt-4o-mini
OPENAI_TEMPERATURE=0.7
OPENAI_MAX_TOKENS=

# 챗봇 기능 설정
CHATBOT_MAX_MESSAGES_HISTORY=20
CHATBOT_STREAM_RESPONSE=true
CHATBOT_DEBUG=false

# 챗봇 서비스 타임아웃 (밀리초)
CHATBOT_TIMEOUT=30000
CHATBOT_HEALTH_CHECK_TIMEOUT=5000
